<?php

namespace Kunstmaan\MediaBundle\Repository;

use Symfony\Component\HttpKernel\Exception\NotFoundHttpException;

use Doctrine\ORM\EntityRepository;

/**
 * GalleryRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ImageGalleryRepository extends GalleryRepository
{

    public function getAllGalleries($limit = null)
    {
        $qb = $this->createQueryBuilder('imagegallery')
                   ->select('imagegallery')
                   ->where('imagegallery.parent is null');

        if (false === is_null($limit))
           $qb->setMaxResults($limit);

        return $qb->getQuery()
                  ->getResult();
    }

    public function getImageGallery($gallery_id)
    {
        $imagegallery = $this->find($gallery_id);
        if (!$imagegallery) {
            throw new NotFoundHttpException('Unable to find image gallery.');
        }

        return $imagegallery;
    }

}